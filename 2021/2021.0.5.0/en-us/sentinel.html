<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>Spring Cloud Alibaba Sentinel</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_spring_cloud_alibaba_sentinel">Spring Cloud Alibaba Sentinel</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction_of_sentinel">Introduction of Sentinel</h3>
<div class="paragraph">
<p>As microservices become popular, the stability of service calls is becoming increasingly important. <a href="https://github.com/alibaba/Sentinel">Sentinel</a> takes "flow" as the breakthrough point, and works on multiple fields including flow control, circuit breaking and load protection to protect service reliability.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/alibaba/Sentinel">Sentinel</a> has the following features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Rich Scenarios</strong>： Sentinel has supported the key scenarios of Alibaba’s Double 11 Shopping Festivals for over 10 years, such as second kill(i.e., controlling sudden bursts of traffic flow so that it’s within the acceptable range of the system capacity), message load shifting, circuit breaking of unreliable downstream applications.</p>
</li>
<li>
<p><strong>Comprehensive Real-Time Monitoring</strong>： Sentinel provides real-time monitoring capability. You can see the monitoring data of your servers at the accuracy of seconds, and even the overall runtime status of a cluster with less than 500 nodes.</p>
</li>
<li>
<p><strong>Extensive Open-Source Ecosystem</strong>： Sentinel provides out-of-box modules that can be easily integrated with other open-source frameworks/libraries, such as Spring Cloud, Dubbo, and gRPC. To use Sentinel, you only need to introduce the related dependency and make a few simple configurations.</p>
</li>
<li>
<p><strong>Sound SPI Extensions</strong>： Sentinel provides easy-to-use and sound SPI extension interfaces. You can customize logics with the SPI extensions quickly, for example, you can define your own rule management, or adapt to specific data sources.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_use_sentinel">How to Use Sentinel</h3>
<div class="paragraph">
<p>If you want to use Sentinel in your project, please use the starter with the group ID as <code>com.alibaba.cloud</code> and the artifact ID as <code>spring-cloud-starter-alibaba-sentinel</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>com.alibaba.cloud<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>spring-cloud-starter-alibaba-sentinel<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is a simple example of how to use Sentinel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@SpringBootApplication</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Application</span> {

    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#339;font-weight:bold">void</span> main(<span style="color:#0a8;font-weight:bold">String</span><span style="color:#339;font-weight:bold">[]</span> args) {
        SpringApplication.run(ServiceApplication.class, args);
    }

}

<span style="color:#007">@RestController</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">TestController</span> {

    <span style="color:#007">@GetMapping</span>(value = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/hello</span><span style="color:#710">&quot;</span></span>)
    <span style="color:#007">@SentinelResource</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hello</span><span style="color:#710">&quot;</span></span>)
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">String</span> hello() {
        <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello Sentinel</span><span style="color:#710">&quot;</span></span>;
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The @SentinelResource annotation is used to identify if a resource is rate limited or degraded. In the above sample, the 'hello' attribute of the annotation refers to the resource name.</p>
</div>
<div class="paragraph">
<p>@SentinelResource also provides attributes such as <code>blockHandler</code>, <code>blockHandlerClass</code>,  and <code>fallback</code> to identify rate limiting or degradation operations. For more details, refer to  <a href="https://github.com/alibaba/Sentinel/wiki/%E6%B3%A8%E8%A7%A3%E6%94%AF%E6%8C%81">Sentinel Annotation Support</a>.</p>
</div>
<div class="paragraph">
<p>The above examples are all used in the WebServlet environment. Sentinel currently supports WebFlux and needs to cooperate with the <code>spring-boot-starter-webflux</code> dependency to trigger the WebFlux-related automation configuration in sentinel starter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@SpringBootApplication</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Application</span> {

    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#339;font-weight:bold">void</span> main(<span style="color:#0a8;font-weight:bold">String</span><span style="color:#339;font-weight:bold">[]</span> args) {
        SpringApplication.run(ServiceApplication.class, args);
    }

}

<span style="color:#007">@RestController</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">TestController</span> {

    <span style="color:#007">@GetMapping</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/mono</span><span style="color:#710">&quot;</span></span>)
    <span style="color:#007">@SentinelResource</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hello</span><span style="color:#710">&quot;</span></span>)
    <span style="color:#088;font-weight:bold">public</span> Mono&lt;<span style="color:#0a8;font-weight:bold">String</span>&gt; mono() {
        <span style="color:#080;font-weight:bold">return</span> Mono.just(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">simple string</span><span style="color:#710">&quot;</span></span>)
                        .transform(<span style="color:#080;font-weight:bold">new</span> SentinelReactorTransformer&lt;&gt;(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">otherResourceName</span><span style="color:#710">&quot;</span></span>));
    }

}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_sentinel_dashboard">Sentinel Dashboard</h5>
<div class="paragraph">
<p>The Sentinel community provides a lightweight console that provides machine discovery, real-time monitoring of stand-alone resources, cluster resource aggregation, and rule management. All you need is a simple configuration of your app to use these features.
<strong>Note</strong>: The statistics overview for clusters only supports clusters with less than 500 nodes, and has a latency of about 1 to 2 seconds.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://github.com/alibaba/Sentinel/wiki/image/dashboard.png" alt="dashboard">
</div>
<div class="title">Figure 1. Sentinel Dashboard</div>
</div>
<div class="paragraph">
<p>To use the Sentinel dashboard, simply complete the following 3 steps.</p>
</div>
<div class="sect5">
<h6 id="_get_the_dashboard">Get the Dashboard</h6>
<div class="paragraph">
<p>You can download the latest dashboard JAR file from the <a href="https://github.com/alibaba/Sentinel/releases">Release Page</a>.</p>
</div>
<div class="paragraph">
<p>You can also get the latest source code to build your own Sentinel dashboard：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Download the  <a href="https://github.com/alibaba/Sentinel/tree/master/sentinel-dashboard">Dashboard</a> project.</p>
</li>
<li>
<p>Run the following command to package the code into a FatJar: <code>mvn clean package</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_start_the_dashboard">Start the Dashboard</h6>
<div class="paragraph">
<p>Sentinel dashboard is a standard SpringBoot application, and you can run the JAR file in the Spring Boot mode.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">java -Dserver.port=8080 -Dcsp.sentinel.dashboard.server=localhost:8080 -Dproject.name=sentinel-dashboard -jar sentinel-dashboard.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>If there is conflict with the 8080 port, you can use <code>-Dserver.port=new port</code> to define a new port.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configure_the_dashboard">Configure the Dashboard</h4>
<div class="listingblock">
<div class="title">application.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">spring</span>:
  <span style="color:#606">cloud</span>:
    <span style="color:#606">sentinel</span>:
      <span style="color:#606">transport</span>:
        <span style="color:#606">port</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">8719</span></span>
        <span style="color:#606">dashboard</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">localhost:8080</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The port number specified in <code>spring.cloud.sentinel.transport.port</code> will start an HTTP Server on the corresponding server of the application, and this server will interact with the Sentinel dashboard. For example, if a rate limiting rule is added in the Sentinel dashboard, the the rule data will be pushed to and recieved by the HTTP Server, which in turn registers the rule to Sentinel.</p>
</div>
<div class="paragraph">
<p>For more information about Sentinel dashboard, please refer to <a href="https://github.com/alibaba/Sentinel/wiki/%E6%8E%A7%E5%88%B6%E5%8F%B0">Sentinel Dashboard</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_openfeign_support">OpenFeign Support</h3>
<div class="paragraph">
<p>Sentinel is compatible with the <a href="https://github.com/OpenFeign/feign">OpenFeign</a> component. To use it, in addition to introducing the <code>sentinel-starter</code> dependency, complete the following 2 steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enable the Sentinel support for feign in the properties file. <code>feign.sentinel.enabled=true</code></p>
</li>
<li>
<p>Add the <code>openfeign starter</code> dependency to trigger and enable <code>sentinel starter</code>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.springframework.cloud<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>spring-cloud-starter-openfeign<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a simple usage of <code>FeignClient</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@FeignClient</span>(name = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">service-provider</span><span style="color:#710">&quot;</span></span>, fallback = EchoServiceFallback.class, configuration = FeignConfiguration.class)
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">interface</span> <span style="color:#B06;font-weight:bold">EchoService</span> {
    <span style="color:#007">@GetMapping</span>(value = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/echo/{str}</span><span style="color:#710">&quot;</span></span>)
    <span style="color:#0a8;font-weight:bold">String</span> echo(<span style="color:#007">@PathVariable</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">str</span><span style="color:#710">&quot;</span></span>) <span style="color:#0a8;font-weight:bold">String</span> str);
}

<span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">FeignConfiguration</span> {
    <span style="color:#007">@Bean</span>
    <span style="color:#088;font-weight:bold">public</span> EchoServiceFallback echoServiceFallback() {
        <span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">new</span> EchoServiceFallback();
    }
}

<span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">EchoServiceFallback</span> <span style="color:#088;font-weight:bold">implements</span> EchoService {
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">String</span> echo(<span style="color:#007">@PathVariable</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">str</span><span style="color:#710">&quot;</span></span>) <span style="color:#0a8;font-weight:bold">String</span> str) {
        <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">echo fallback</span><span style="color:#710">&quot;</span></span>;
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The resource name policy in the corresponding interface of Feign is：httpmethod:protocol://requesturl. All the attributes in the <code>@FeignClient</code> annotation is supported by Sentinel.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The corresponding resource name of the <code>echo</code> method in the <code>EchoService</code> interface is <code>GET:http://service-provider/echo/{str}</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_resttemplate_support">RestTemplate Support</h3>
<div class="paragraph">
<p>Spring Cloud Alibaba Sentinel supports the protection of <code>RestTemplate</code> service calls using Sentinel. To do this, you need to add the <code>@SentinelRestTemplate</code> annotation when constructing the <code>RestTemplate</code> bean.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@Bean</span>
<span style="color:#007">@SentinelRestTemplate</span>(blockHandler = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">handleException</span><span style="color:#710">&quot;</span></span>, blockHandlerClass = ExceptionUtil.class)
<span style="color:#088;font-weight:bold">public</span> RestTemplate restTemplate() {
    <span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">new</span> RestTemplate();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The attribute of the <code>@SentinelRestTemplate</code> annotation support flow control(<code>blockHandler</code>, <code>blockHandlerClass</code>) and circuit breaking(<code>fallback</code>, <code>fallbackClass</code>).</p>
</div>
<div class="paragraph">
<p>==</p>
</div>
<div class="paragraph">
<p>The <code>blockHandler</code> or <code>fallback</code> is the static method of <code>blockHandlerClass</code> or <code>fallbackClass</code>.</p>
</div>
<div class="paragraph">
<p>The parameter and return value of method in <code>@SentinelRestTemplate</code> is same as <code>org.springframework.http.client.ClientHttpRequestInterceptor#interceptor</code>, but it has one more parameter <code>BlockException</code> to catch the exception by Sentinel.</p>
</div>
<div class="paragraph">
<p>The method signature of <code>handleException</code> in <code>ExceptionUtil</code> above should be like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">ExceptionUtil</span> {
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> ClientHttpResponse handleException(HttpRequest request, <span style="color:#339;font-weight:bold">byte</span><span style="color:#339;font-weight:bold">[]</span> body, ClientHttpRequestExecution execution, BlockException exception) {
        ...
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
When the application starts, it will check if the <code>@SentinelRestTemplate</code> annotation corresponding to the flow control or circuit breaking method exists, if it does not exist, it will throw an exception.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The attribute of the <code>@SentinelRestTemplate</code> annotation is optional.</p>
</div>
<div class="paragraph">
<p>It will return <code>RestTemplate request block by sentinel</code> when you using <code>RestTemplate</code> blocked by Sentinel. You can override it by your own logic. We provide <code>SentinelClientHttpResponse</code> to handle the response.</p>
</div>
<div class="paragraph">
<p>Sentinel RestTemplate provides two granularities for resource rate limiting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>httpmethod:schema://host:port/path</code>： Protocol, host, port and path</p>
</li>
<li>
<p><code>httpmethod:schema://host:port</code>： Protocol, host and port</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Take Http GET <code><a href="https://www.taobao.com/test" class="bare">https://www.taobao.com/test</a></code> as an example. The corresponding resource names have two levels of granularities, <code>GET:https://www.taobao.com</code> and <code>GET:https://www.taobao.com/test</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_dynamic_data_source_support">Dynamic Data Source Support</h3>
<div class="paragraph">
<p><code>SentinelProperties</code> provide <code>datasource</code> attribute to configure datasource.</p>
</div>
<div class="paragraph">
<p>For example, 4 data sources are configures：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">spring.cloud.sentinel.datasource.ds1.file.file=classpath: degraderule.json
spring.cloud.sentinel.datasource.ds1.file.rule-type=flow

#spring.cloud.sentinel.datasource.ds1.file.file=classpath: flowrule.json
#spring.cloud.sentinel.datasource.ds1.file.data-type=custom
#spring.cloud.sentinel.datasource.ds1.file.converter-class=JsonFlowRuleListConverter
#spring.cloud.sentinel.datasource.ds1.file.rule-type=flow

spring.cloud.sentinel.datasource.ds2.nacos.server-addr=127.0.0.1:8848
spring.cloud.sentinel.datasource.ds2.nacos.data-id=sentinel
spring.cloud.sentinel.datasource.ds2.nacos.group-id=DEFAULT_GROUP
spring.cloud.sentinel.datasource.ds2.nacos.data-type=json
spring.cloud.sentinel.datasource.ds2.nacos.rule-type=degrade

spring.cloud.sentinel.datasource.ds3.zk.path = /Sentinel-Demo/SYSTEM-CODE-DEMO-FLOW
spring.cloud.sentinel.datasource.ds3.zk.server-addr = localhost:2181
spring.cloud.sentinel.datasource.ds3.zk.rule-type=authority

spring.cloud.sentinel.datasource.ds4.apollo.namespace-name = application
spring.cloud.sentinel.datasource.ds4.apollo.flow-rules-key = sentinel
spring.cloud.sentinel.datasource.ds4.apollo.default-flow-rule-value = test
spring.cloud.sentinel.datasource.ds4.apollo.rule-type=param-flow</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method follows the configuration of Spring Cloud Stream Binder. <code>TreeMap</code> is used for storage internally, and comparator is <code>String.CASE_INSENSITIVE_ORDER</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
d1, ds2, ds3, ds4 are the names of <code>ReadableDataSource</code>, and can be coded as you like. The <code>file</code>, <code>zk</code>, <code>nacos</code> , <code>apollo</code> refer to the specific data sources. The configurations following them are the specific configurations of these data sources respecitively.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Every data source has 3 common configuration items: <code>data-type</code>, <code>converter-class</code> and <code>rule-type</code>.</p>
</div>
<div class="paragraph">
<p><code>data-type</code> refers to <code>Converter</code>. Spring Cloud Alibaba Sentinel provides two embedded values by default: <code>json</code> and <code>xml</code> (the default is json if not specified). If you do not want to use the embedded <code>json</code> or <code>xml</code> <code>Converter</code>, you can also fill in <code>custom</code> to indicate that you will define your own <code>Converter</code>, and then configure the <code>converter-class</code>. You need to specify the full path of the class for this configuration.</p>
</div>
<div class="paragraph">
<p><code>rule-type</code> refers to the rule type in datasource(<code>flow</code>，<code>degrade</code>，<code>authority</code>，<code>system</code>, <code>param-flow</code>, <code>gw-flow</code>, <code>gw-api-group</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
XML format is not supported by default. To make it effective, you need to add the  <code>jackson-dataformat-xml</code> dependency.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To learn more about how dynamic data sources work in Sentinel, refer to <a href="https://github.com/alibaba/Sentinel/wiki/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%99%E6%89%A9%E5%B1%95">Dynamic Rule Extension</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_support_spring_cloud_gateway">Support Spring Cloud Gateway</h3>
<div class="paragraph">
<p>Refer <a href="https://github.com/alibaba/Sentinel/wiki/API-Gateway-Flow-Control">API Gateway Flow Control</a></p>
</div>
<div class="paragraph">
<p>If you want to use Sentinel Starter with Spring Cloud Gateway, you need to add the <code>spring-cloud-alibaba-sentinel-gateway</code> dependency and add the <code>spring-cloud-starter-gateway</code> dependency to let Spring Cloud Gateway AutoConfiguration class in the module takes effect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>com.alibaba.cloud<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>spring-cloud-starter-alibaba-sentinel<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span>

<span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>com.alibaba.cloud<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>spring-cloud-alibaba-sentinel-gateway<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span>

<span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.springframework.cloud<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>spring-cloud-starter-gateway<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_circuit_breaker_spring_cloud_circuit_breaker_with_sentinel_configuring_sentinel_circuit_breakers">Circuit Breaker: Spring Cloud Circuit Breaker With Sentinel &amp; Configuring Sentinel Circuit Breakers</h3>
<div class="sect3">
<h4 id="_default_configuration">Default Configuration</h4>
<div class="paragraph">
<p>To provide a default configuration for all of your circuit breakers create a <code>Customizer</code> bean that is passed a
<code>SentinelCircuitBreakerFactory</code> or <code>ReactiveSentinelCircuitBreakerFactory</code>.
The <code>configureDefault</code> method can be used to provide a default configuration.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@Bean</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">Customizer</span>&lt;SentinelCircuitBreakerFactory&gt; defaultCustomizer() {
        <span style="color:#080;font-weight:bold">return</span> factory -&gt; factory.configureDefault(id -&gt; <span style="color:#080;font-weight:bold">new</span> SentinelConfigBuilder(id)
                        .build());
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can choose to provide default circuit breaking rules via <code>SentinelConfigBuilder#rules(rules)</code>.
You can also choose to load circuit breaking rules later elsewhere using
<code>DegradeRuleManager.loadRules(rules)</code> API of Sentinel, or via Sentinel dashboard.</p>
</div>
<div class="sect4">
<h5 id="_reactive_example">Reactive Example</h5>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@Bean</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">Customizer</span>&lt;ReactiveSentinelCircuitBreakerFactory&gt; defaultCustomizer() {
        <span style="color:#080;font-weight:bold">return</span> factory -&gt; factory.configureDefault(id -&gt; <span style="color:#080;font-weight:bold">new</span> SentinelConfigBuilder(id)
                        .build());
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_specific_circuit_breaker_configuration">Specific Circuit Breaker Configuration</h4>
<div class="paragraph">
<p>Similarly to providing a default configuration, you can create a <code>Customizer</code> bean this is passed a
<code>SentinelCircuitBreakerFactory</code>.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@Bean</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">Customizer</span>&lt;SentinelCircuitBreakerFactory&gt; slowCustomizer() {
        <span style="color:#0a8;font-weight:bold">String</span> slowId = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">slow</span><span style="color:#710">&quot;</span></span>;
        <span style="color:#0a8;font-weight:bold">List</span>&lt;DegradeRule&gt; rules = <span style="color:#0a8;font-weight:bold">Collections</span>.singletonList(
                <span style="color:#080;font-weight:bold">new</span> DegradeRule(slowId).setGrade(RuleConstant.DEGRADE_GRADE_RT)
                        .setCount(<span style="color:#00D">100</span>)
                        .setTimeWindow(<span style="color:#00D">10</span>)
                );
        <span style="color:#080;font-weight:bold">return</span> factory -&gt; factory.configure(builder -&gt; builder.rules(rules), slowId);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_reactive_example_2">Reactive Example</h5>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@Bean</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">Customizer</span>&lt;ReactiveSentinelCircuitBreakerFactory&gt; customizer() {
        <span style="color:#0a8;font-weight:bold">List</span>&lt;DegradeRule&gt; rules = <span style="color:#0a8;font-weight:bold">Collections</span>.singletonList(
                <span style="color:#080;font-weight:bold">new</span> DegradeRule().setGrade(RuleConstant.DEGRADE_GRADE_RT)
                        .setCount(<span style="color:#00D">100</span>)
                        .setTimeWindow(<span style="color:#00D">10</span>)
                );
        <span style="color:#080;font-weight:bold">return</span> factory -&gt; factory.configure(builder -&gt; builder.rules(rules), <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">foo</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bar</span><span style="color:#710">&quot;</span></span>);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sentinel_endpoint">Sentinel Endpoint</h3>
<div class="paragraph">
<p>Sentinel provides an Endpoint internally with a corresponding endpoint id of <code>sentinel</code>.</p>
</div>
<div class="paragraph">
<p>Endpoint exposed json contains multi properties:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>appName: application name</p>
</li>
<li>
<p>logDir: the directory of log</p>
</li>
<li>
<p>logUsePid: log name with pid ot not</p>
</li>
<li>
<p>blockPage: redirect page after sentinel block</p>
</li>
<li>
<p>metricsFileSize: the size of metrics file</p>
</li>
<li>
<p>metricsFileCharset: metrics file charset</p>
</li>
<li>
<p>totalMetricsFileCount: the total file count of of metrics file</p>
</li>
<li>
<p>consoleServer: sentinel dashboard address</p>
</li>
<li>
<p>clientIp: client ip</p>
</li>
<li>
<p>heartbeatIntervalMs: client heartbeat interval with dashboard</p>
</li>
<li>
<p>clientPort: the client needs to expose the port to interact with the dashboard</p>
</li>
<li>
<p>coldFactor: cold factor</p>
</li>
<li>
<p>filter: CommonFilter related properties, such as order, urlPatterns and enable</p>
</li>
<li>
<p>datasource: datasource configuration info by client</p>
</li>
<li>
<p>rules: the rule that the client takes effect internally contains flowRules, degradeRules, systemRules, authorityRule, paramFlowRule</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The followings shows how a service instance accesses the Endpoint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
        <span style="color:#606"><span style="color:#404">&quot;</span><span>blockPage</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">null</span>,
        <span style="color:#606"><span style="color:#404">&quot;</span><span>appName</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">sentinel-example</span><span style="color:#710">&quot;</span></span>,
        <span style="color:#606"><span style="color:#404">&quot;</span><span>consoleServer</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">localhost:8080</span><span style="color:#710">&quot;</span></span>,
        <span style="color:#606"><span style="color:#404">&quot;</span><span>coldFactor</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">3</span><span style="color:#710">&quot;</span></span>,
        <span style="color:#606"><span style="color:#404">&quot;</span><span>rules</span><span style="color:#404">&quot;</span></span>: {
                <span style="color:#606"><span style="color:#404">&quot;</span><span>flowRules</span><span style="color:#404">&quot;</span></span>: [{
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>resource</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">GET:http://www.taobao.com</span><span style="color:#710">&quot;</span></span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>limitApp</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">default</span><span style="color:#710">&quot;</span></span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>grade</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">1</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>count</span><span style="color:#404">&quot;</span></span>: <span style="color:#60E">0.0</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>strategy</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">0</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>refResource</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">null</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>controlBehavior</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">0</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>warmUpPeriodSec</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">10</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>maxQueueingTimeMs</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">500</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>clusterMode</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">false</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>clusterConfig</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">null</span>
                }, {
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>resource</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/test</span><span style="color:#710">&quot;</span></span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>limitApp</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">default</span><span style="color:#710">&quot;</span></span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>grade</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">1</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>count</span><span style="color:#404">&quot;</span></span>: <span style="color:#60E">0.0</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>strategy</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">0</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>refResource</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">null</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>controlBehavior</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">0</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>warmUpPeriodSec</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">10</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>maxQueueingTimeMs</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">500</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>clusterMode</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">false</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>clusterConfig</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">null</span>
                }, {
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>resource</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/hello</span><span style="color:#710">&quot;</span></span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>limitApp</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">default</span><span style="color:#710">&quot;</span></span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>grade</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">1</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>count</span><span style="color:#404">&quot;</span></span>: <span style="color:#60E">1.0</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>strategy</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">0</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>refResource</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">null</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>controlBehavior</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">0</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>warmUpPeriodSec</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">10</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>maxQueueingTimeMs</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">500</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>clusterMode</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">false</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>clusterConfig</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">null</span>
                }]
        },
        <span style="color:#606"><span style="color:#404">&quot;</span><span>metricsFileCharset</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">UTF-8</span><span style="color:#710">&quot;</span></span>,
        <span style="color:#606"><span style="color:#404">&quot;</span><span>filter</span><span style="color:#404">&quot;</span></span>: {
                <span style="color:#606"><span style="color:#404">&quot;</span><span>order</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">-2147483648</span>,
                <span style="color:#606"><span style="color:#404">&quot;</span><span>urlPatterns</span><span style="color:#404">&quot;</span></span>: [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/*</span><span style="color:#710">&quot;</span></span>],
                <span style="color:#606"><span style="color:#404">&quot;</span><span>enabled</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">true</span>
        },
        <span style="color:#606"><span style="color:#404">&quot;</span><span>totalMetricsFileCount</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">6</span>,
        <span style="color:#606"><span style="color:#404">&quot;</span><span>datasource</span><span style="color:#404">&quot;</span></span>: {
                <span style="color:#606"><span style="color:#404">&quot;</span><span>ds1</span><span style="color:#404">&quot;</span></span>: {
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>file</span><span style="color:#404">&quot;</span></span>: {
                                <span style="color:#606"><span style="color:#404">&quot;</span><span>dataType</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">json</span><span style="color:#710">&quot;</span></span>,
                                <span style="color:#606"><span style="color:#404">&quot;</span><span>ruleType</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">FLOW</span><span style="color:#710">&quot;</span></span>,
                                <span style="color:#606"><span style="color:#404">&quot;</span><span>converterClass</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">null</span>,
                                <span style="color:#606"><span style="color:#404">&quot;</span><span>file</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">...</span><span style="color:#710">&quot;</span></span>,
                                <span style="color:#606"><span style="color:#404">&quot;</span><span>charset</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">utf-8</span><span style="color:#710">&quot;</span></span>,
                                <span style="color:#606"><span style="color:#404">&quot;</span><span>recommendRefreshMs</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">3000</span>,
                                <span style="color:#606"><span style="color:#404">&quot;</span><span>bufSize</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">1048576</span>
                        },
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>nacos</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">null</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>zk</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">null</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>apollo</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">null</span>,
                        <span style="color:#606"><span style="color:#404">&quot;</span><span>redis</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">null</span>
                }
        },
        <span style="color:#606"><span style="color:#404">&quot;</span><span>clientIp</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">30.5.121.91</span><span style="color:#710">&quot;</span></span>,
        <span style="color:#606"><span style="color:#404">&quot;</span><span>clientPort</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">8719</span><span style="color:#710">&quot;</span></span>,
        <span style="color:#606"><span style="color:#404">&quot;</span><span>logUsePid</span><span style="color:#404">&quot;</span></span>: <span style="color:#088">false</span>,
        <span style="color:#606"><span style="color:#404">&quot;</span><span>metricsFileSize</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">52428800</span>,
        <span style="color:#606"><span style="color:#404">&quot;</span><span>logDir</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">...</span><span style="color:#710">&quot;</span></span>,
        <span style="color:#606"><span style="color:#404">&quot;</span><span>heartbeatIntervalMs</span><span style="color:#404">&quot;</span></span>: <span style="color:#00D">10000</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration">Configuration</h3>
<div class="paragraph">
<p>The following table shows that when there are corresponding bean types in <code>ApplicationContext</code>, some actions will be taken:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Existing Bean Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Function</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UrlCleaner</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WebCallbackManager.setUrlCleaner(urlCleaner)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource cleaning(resource(for example, classify all URLs of /foo/:id to the  /foo/* resource))</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UrlBlockHandler</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WebCallbackManager.setUrlBlockHandler(urlBlockHandler)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Customize rate limiting logic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RequestOriginParser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WebCallbackManager.setRequestOriginParser(requestOriginParser)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Setting the origin</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following table shows all the configurations of Spring Cloud Alibaba Sentinel:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.application.name</code> or <code>project.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project Name Of Sentinel</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether Sentinel automatic configuration takes effect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.eager</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to trigger Sentinel initialization in advance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.transport.port</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port for the application to interact with Sentinel dashboard. An HTTP Server which uses this port will be started in the application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8719</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.transport.dashboard</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sentinel dashboard address</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.transport.heartbeatIntervalMs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hearbeat interval between the application and Sentinel dashboard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.transport.client-ip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The client IP of this configuration will be registered to the Sentinel Server side.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.filter.order</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loading order of Servlet Filter. The filter will be constructed in the Starter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer.MIN_VALUE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.filter.url-patterns</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data type is array. Refers to the collection of Servlet Filter ULR patterns</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.filter.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable to instance CommonFilter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.metric.charset</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">metric file character set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UTF-8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.metric.fileSingleSize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sentinel metric single file size</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.metric.fileTotalCount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sentinel metric total file number</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.log.dir</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory of Sentinel log files</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.log.switch-pid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If PID is required for Sentinel log file names</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.servlet.blockPage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Customized redirection URL. When rate limited, the request will be redirected to the pre-defined URL</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.flow.coldFactor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/alibaba/Sentinel/wiki/%E9%99%90%E6%B5%81---%E5%86%B7%E5%90%AF%E5%8A%A8">ColdFactor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.scg.fallback.mode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response mode after Spring Cloud Gateway circuit break (select <code>redirect</code> or <code>response</code>)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.scg.fallback.redirect</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Cloud Gateway response mode is the redirect URL corresponding to 'redirect' mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.scg.fallback.response-body</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Cloud Gateway response mode is response content corresponding to 'response' mode</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.scg.fallback.response-status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Cloud Gateway response mode is the response code corresponding to 'response' mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">429</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spring.cloud.sentinel.scg.fallback.content-type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Spring Cloud Gateway response mode is the content-type corresponding to the 'response' mode.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
These configurations will only take effect in servlet environment. RestTemplate and Feign will not take effect for these configurations.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-03-15 09:27:08 +0800
</div>
</div>
</body>
</html>